[English](README.md) | Русский

# Проект тестирования производительности PHP

Этот проект содержит набор PHP-скриптов, предназначенных для тестирования и анализа производительности в различных версиях PHP. Он позволяет сравнивать время выполнения и использование памяти различных PHP-операций.

### Возможности
- Набор скриптов для тестирования производительности
- Тестовое окружение на основе Docker
- Поддержка версий PHP от 7.4 до 8.4
- Различные тестовые сценарии, включая:
  - Тесты преобразования типов
  - Операции с массивами
  - Производительность DTO (Data Transfer Object)
  - Оптимизация циклов foreach
  - Сравнение массивов и DTO

### Требования
- Docker и Docker Compose
- PHP 7.4 или выше (для локальной разработки)
- Git

### Установка
```bash
git clone [repository-url]
cd [repository-name]
```

### Запуск тестов
Проект использует Docker-контейнеры для тестирования разных версий PHP. Для запуска тестового окружения:

```bash
docker-compose up -d
```

Это запустит контейнеры для версий PHP:
- PHP 7.4 (порт 9022)
- PHP 8.0 (порт 9023)
- PHP 8.1.25 (порт 9024)
- PHP 8.2.12 (порт 9025)
- PHP 8.3 (порт 9026)
- PHP 8.4 (порт 9027)

Каждый контейнер монтирует директорию `tests`, что позволяет запускать одни и те же тесты в разных версиях PHP.

### Примеры работы с контейнерами

#### Копирование скрипта в контейнер
```bash
# Копирование скрипта в контейнер PHP 7.4
docker cp tests/foreach_bug/dto_collection.php my-php7_4-container:test.php

# Копирование скрипта в контейнер PHP 8.0
docker cp tests/foreach_bug/dto_collection.php my-php8_0-container:test.php
```

#### Запуск скрипта в контейнере
```bash
# Запуск скрипта в контейнере PHP 7.4
docker exec my-php7_4-container php test.php

# Запуск скрипта в контейнере PHP 8.0
docker exec my-php8_0-container php test.php
```

### Структура тестов
Директория `tests` содержит различные тестовые сценарии:
- `convert_simple_types/` - Тесты производительности преобразования типов
- `foreach_bug/` - Тесты оптимизации циклов foreach